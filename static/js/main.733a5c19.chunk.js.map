{"version":3,"sources":["model/vec-csv.ts","components/Calculator.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["parseCsv","file","a","Promise","resolve","reject","validateCsv","records","papaparse","worker","delimiter","header","step","results","onParseStep","complete","error","skipEmptyLines","firstLine","slice","text","data","push","nmi","parseInt","meter_serial_number","type","date","parse","Date","estimated","usageByHalfHour","buildUsageByHalfHour","halfHourlyUsage","hour","halfHour","timeStart","toString","padStart","padEnd","timeEnd","timeRange","blockKwh","parseFloat","isNaN","useStyles","makeStyles","theme","container","marginTop","spacing","marginBottom","paper","padding","title","color","palette","primary","main","textAlign","display","fontSize","marginLeft","marginRight","heading","verticalAlign","uploaded","borderRadius","shape","background","success","dark","Upload","fileInputRef","React","createRef","useState","undefined","usageFile","setUsageFile","usageData","setUsageData","csvError","setCsvError","startDate","setStartDate","endDate","setEndDate","startTime","setStartTime","endTime","setEndTime","monday","tuesday","wednesday","thursday","friday","saturday","sunday","daysOfWeek","setDaysOfWeek","wfhUsage","setWfhUsage","wfhDays","setWfhDays","costPerKwh","setCostPerKwh","percentageUsage","setPercentageUsage","isProcessing","setIsProcessing","classes","isDayOfWeekMatch","useCallback","getDay","Error","isHourScheduleMatch","startTimeHoursDecimal","getHours","getMinutes","endTimeHoursDecimal","useMemo","consumptionData","filter","x","map","record","Object","entries","key","value","handleDaysOfWeekChange","event","target","name","checked","onFilesAdded","files","length","item","current","Container","maxWidth","className","Grid","direction","xs","Typography","variant","gutterBottom","href","rel","Paper","ref","style","accept","onChange","Box","marginY","Button","onClick","click","size","FormHelperText","format","sm","FormControl","FormLabel","autoOk","disableToolbar","label","inputVariant","InputAdornmentProps","position","margin","fullWidth","mask","minutesStep","FormGroup","row","FormControlLabel","control","Checkbox","toLowerCase","CircularProgress","m","Math","round","TextField","input","currentTarget","min","InputProps","endAdornment","InputAdornment","inputProps","max","App","utils","DateFnsUtils","Fragment","CssBaseline","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","console","message"],"mappings":"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","file":"static/js/main.733a5c19.chunk.js","sourcesContent":["import * as papaparse from \"papaparse\";\nimport { parse } from \"date-fns\";\n\nexport type VecRecord = {\n  nmi: number;\n  meter_serial_number: number;\n  type: \"consumption\" | \"generation\";\n  date: Date;\n  estimated: boolean;\n  usageByHalfHour: { [hour: number]: number };\n};\n\nexport const parseCsv = async (file: File): Promise<VecRecord[]> => {\n  return new Promise(async (resolve, reject) => {\n    if ((await validateCsv(file)) === false) return reject();\n    let records: VecRecord[] = [];\n\n    papaparse.parse(file, {\n      worker: true, // use web workers\n      delimiter: \",\",\n      header: true,\n      step: (results) => onParseStep(results, records),\n      complete: () => {\n        return resolve(records);\n      },\n      error: () => {\n        return reject();\n      },\n      skipEmptyLines: true,\n    });\n  });\n};\n\nconst validateCsv = async (file: File): Promise<boolean> => {\n  const firstLine = file.slice(0, 825, \"text/plain\");\n  const text = await firstLine.text();\n\n  // match text with expected CSV headers\n  return (\n    text ===\n    `\"NMI\",\"METER SERIAL NUMBER\",\"CON/GEN\",\"DATE\",\"ESTIMATED?\",\"00:00 - 00:30\",\"00:30 - 01:00\",\"01:00 - 01:30\",\"01:30 - 02:00\",\"02:00 - 02:30\",\"02:30 - 03:00\",\"03:00 - 03:30\",\"03:30 - 04:00\",\"04:00 - 04:30\",\"04:30 - 05:00\",\"05:00 - 05:30\",\"05:30 - 06:00\",\"06:00 - 06:30\",\"06:30 - 07:00\",\"07:00 - 07:30\",\"07:30 - 08:00\",\"08:00 - 08:30\",\"08:30 - 09:00\",\"09:00 - 09:30\",\"09:30 - 10:00\",\"10:00 - 10:30\",\"10:30 - 11:00\",\"11:00 - 11:30\",\"11:30 - 12:00\",\"12:00 - 12:30\",\"12:30 - 13:00\",\"13:00 - 13:30\",\"13:30 - 14:00\",\"14:00 - 14:30\",\"14:30 - 15:00\",\"15:00 - 15:30\",\"15:30 - 16:00\",\"16:00 - 16:30\",\"16:30 - 17:00\",\"17:00 - 17:30\",\"17:30 - 18:00\",\"18:00 - 18:30\",\"18:30 - 19:00\",\"19:00 - 19:30\",\"19:30 - 20:00\",\"20:00 - 20:30\",\"20:30 - 21:00\",\"21:00 - 21:30\",\"21:30 - 22:00\",\"22:00 - 22:30\",\"22:30 - 23:00\",\"23:00 - 23:30\",\"23:30 - 00:00\"`\n  );\n};\n\nconst onParseStep = (\n  results: papaparse.ParseResult<unknown>,\n  records: VecRecord[]\n) => {\n  const data = (results.data as unknown) as { [key: string]: string };\n\n  records.push({\n    nmi: parseInt(data[\"NMI\"]),\n    meter_serial_number: parseInt(data[\"METER SERIAL NUMBER\"]),\n    type: data[\"CON/GEN\"] === \"Consumption\" ? \"consumption\" : \"generation\",\n    date: parse(data[\"DATE\"], \"dd/MM/yyyy\", new Date()),\n    estimated: data[\"ESTIMATED?\"] === \"Yes\",\n    usageByHalfHour: buildUsageByHalfHour(data),\n  });\n};\n\nconst buildUsageByHalfHour = (data: {\n  [key: string]: string;\n}): { [key: number]: number } => {\n  let halfHourlyUsage: { [key: number]: number } = {};\n\n  // loop through 30 minute blocks\n  for (let hour = 0; hour < 24; hour++) {\n    for (let halfHour = 0; halfHour < 2; halfHour++) {\n      let timeStart = `${hour.toString().padStart(2, \"0\")}:${(halfHour * 30)\n        .toString()\n        .padEnd(2, \"0\")}`;\n      let timeEnd =\n        halfHour === 0\n          ? `${hour.toString().padStart(2, \"0\")}:${((halfHour + 1) * 30)\n              .toString()\n              .padEnd(2, \"0\")}`\n          : `${(hour + 1).toString().padStart(2, \"0\")}:${((halfHour - 1) * 30)\n              .toString()\n              .padEnd(2, \"0\")}`;\n\n      if (timeEnd === \"24:00\") {\n        timeEnd = \"00:00\";\n      }\n\n      let timeRange = `${timeStart} - ${timeEnd}`;\n      let blockKwh = parseFloat(data[timeRange]);\n\n      if (isNaN(blockKwh)) {\n        blockKwh = 0;\n      }\n\n      // write record\n      halfHourlyUsage[hour + (halfHour ? 0.5 : 0)] = blockKwh;\n    }\n  }\n\n  return halfHourlyUsage;\n};\n","import {\n  Box,\n  Button,\n  Checkbox,\n  CircularProgress,\n  Container,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  FormHelperText,\n  FormLabel,\n  Grid,\n  InputAdornment,\n  makeStyles,\n  Paper,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { KeyboardDatePicker, KeyboardTimePicker } from \"@material-ui/pickers\";\nimport React, { useCallback, useMemo, useState } from \"react\";\nimport { parseCsv } from \"../model/vec-csv\";\nimport { parse, format } from \"date-fns\";\nimport DateRangeTwoToneIcon from \"@material-ui/icons/DateRangeTwoTone\";\nimport PowerIcon from \"@material-ui/icons/Power\";\nimport MonetizationOnIcon from \"@material-ui/icons/MonetizationOn\";\nimport InsertDriveFileIcon from \"@material-ui/icons/InsertDriveFile\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport { VecRecord } from \"../model/vec-csv\";\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    marginTop: theme.spacing(6),\n    marginBottom: theme.spacing(6),\n  },\n  paper: {\n    padding: theme.spacing(2),\n  },\n  title: {\n    color: theme.palette.primary.main,\n    textAlign: \"center\",\n    \"& > svg\": {\n      display: \"block\",\n      fontSize: 60,\n      marginLeft: \"auto\",\n      marginRight: \"auto\",\n      marginBottom: theme.spacing(1),\n    },\n  },\n  heading: {\n    color: theme.palette.primary.main,\n    \"& > svg\": {\n      verticalAlign: \"sub\",\n      marginRight: theme.spacing(1),\n    },\n  },\n  uploaded: {\n    borderRadius: theme.shape.borderRadius,\n    background: theme.palette.success.dark,\n    color: \"white\",\n    padding: theme.spacing(2),\n  },\n  error: {\n    borderRadius: theme.shape.borderRadius,\n    background: theme.palette.error.dark,\n    color: \"white\",\n    padding: theme.spacing(2),\n  },\n}));\n\nexport const Upload = () => {\n  const fileInputRef = React.createRef<HTMLInputElement>();\n  const [usageFile, setUsageFile] = useState<File | undefined>(undefined);\n  const [usageData, setUsageData] = useState<VecRecord[]>();\n  const [csvError, setCsvError] = useState<boolean>(false);\n  const [startDate, setStartDate] = useState<Date>(new Date(\"2020-03-01\"));\n  const [endDate, setEndDate] = useState<Date>(new Date(\"2020-06-30\"));\n  const [startTime, setStartTime] = useState<Date>(\n    parse(\"8:00 AM\", \"h:m a\", new Date())\n  );\n  const [endTime, setEndTime] = useState<Date>(\n    parse(\"5:00 PM\", \"h:m a\", new Date())\n  );\n  const [daysOfWeek, setDaysOfWeek] = React.useState({\n    monday: true,\n    tuesday: true,\n    wednesday: true,\n    thursday: true,\n    friday: true,\n    saturday: false,\n    sunday: false,\n  });\n  const [wfhUsage, setWfhUsage] = useState<number>(0);\n  const [wfhDays, setWfhDays] = useState<number>(0);\n  const [costPerKwh, setCostPerKwh] = useState<number>(0.22);\n  const [percentageUsage, setPercentageUsage] = useState<number>(100);\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n\n  const classes = useStyles();\n\n  const isDayOfWeekMatch = useCallback(\n    (date: Date) => {\n      const dateDayOfWeek = date.getDay();\n\n      switch (dateDayOfWeek) {\n        case 0:\n          return daysOfWeek.sunday;\n        case 1:\n          return daysOfWeek.monday;\n        case 2:\n          return daysOfWeek.tuesday;\n        case 3:\n          return daysOfWeek.wednesday;\n        case 4:\n          return daysOfWeek.thursday;\n        case 5:\n          return daysOfWeek.friday;\n        case 6:\n          return daysOfWeek.saturday;\n        default:\n          throw new Error();\n      }\n    },\n    [daysOfWeek]\n  );\n\n  const isHourScheduleMatch = useCallback(\n    (hour: number) => {\n      // convert time to hours represented in decimal (e.g. 9:30 = 9.5)\n      const startTimeHoursDecimal =\n        startTime.getHours() + (startTime.getMinutes() >= 30 ? 0.5 : 0);\n      const endTimeHoursDecimal =\n        endTime.getHours() + (endTime.getMinutes() >= 30 ? 0.5 : 0);\n\n      return hour >= startTimeHoursDecimal && hour < endTimeHoursDecimal;\n    },\n    [startTime, endTime]\n  );\n\n  /** Handle uploading data */\n  useMemo(async () => {\n    if (!usageFile) return;\n\n    try {\n      setUsageData(await parseCsv(usageFile));\n      setCsvError(false);\n    } catch {\n      setUsageData(undefined);\n      setCsvError(true);\n    }\n  }, [usageFile]);\n\n  useMemo(async () => {\n    if (!usageData) return;\n\n    setIsProcessing(true);\n\n    // filter usage data by consumption\n    const consumptionData = usageData.filter(\n      (x) =>\n        x.date >= startDate &&\n        x.date <= endDate &&\n        isDayOfWeekMatch(x.date) &&\n        x.type === \"consumption\"\n    );\n\n    let wfhUsage = 0;\n    let wfhDays = 0;\n    consumptionData.map((record) => {\n      for (const [key, value] of Object.entries(record.usageByHalfHour)) {\n        // our data's keys are represented as a decimal value (e.g. 9:30 = 9.5)\n        let hour = parseFloat(key);\n        if (isHourScheduleMatch(hour)) {\n          wfhUsage += value;\n        }\n      }\n      wfhDays++;\n      return true;\n    });\n\n    setWfhUsage(wfhUsage);\n    setWfhDays(wfhDays);\n\n    setIsProcessing(false);\n  }, [usageData, startDate, endDate, isDayOfWeekMatch, isHourScheduleMatch]);\n\n  const handleDaysOfWeekChange = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    setDaysOfWeek({ ...daysOfWeek, [event.target.name]: event.target.checked });\n  };\n\n  const onFilesAdded = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n\n    if (files?.length !== 1) {\n      return;\n    }\n\n    const file = files.item(0);\n\n    if (!file) {\n      return;\n    }\n\n    setUsageFile(file);\n\n    // clear file input\n    if (fileInputRef.current) fileInputRef.current.value = \"\";\n  };\n\n  const upload = () => {\n    fileInputRef.current?.click();\n  };\n\n  return (\n    <Container maxWidth=\"sm\" className={classes.container}>\n      <Grid container spacing={3} direction=\"column\">\n        <Grid item xs>\n          <Typography variant=\"h5\" className={classes.title} gutterBottom>\n            <HomeIcon />\n            Home office electricity calculator using Victorian Energy Compare\n            Data\n          </Typography>\n          <Typography variant=\"subtitle1\" gutterBottom>\n            To help calculating the electricity usage while working from home\n            during lockdown for the \"\n            <a\n              href=\"https://www.ato.gov.au/individuals/income-and-deductions/deductions-you-can-claim/home-office-expenses/#Actualcostmethod\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              actual cost method\n            </a>\n            \" of deducting home office expenses, this tool automatically\n            calculates your electricity usage from the{\" \"}\n            <a\n              href=\"https://www.victorianenergysaver.vic.gov.au/energy-advice-for-business/accessing-and-understanding-energy-data\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Victorian Energy Compare Data\n            </a>\n            .\n          </Typography>\n        </Grid>\n        <Grid item xs>\n          <Paper className={classes.paper}>\n            <Typography variant=\"h6\" className={classes.heading}>\n              <InsertDriveFileIcon />\n              Victorian Energy Compare Data\n            </Typography>\n            <Typography variant=\"subtitle1\" gutterBottom>\n              Export your Victorian Energy Compare Data CSV file from your{\" \"}\n              <a\n                href=\"https://www.victorianenergysaver.vic.gov.au/energy-advice-for-business/accessing-and-understanding-energy-data#portal\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                electricity distributor's website\n              </a>\n              .\n            </Typography>\n            <input\n              ref={fileInputRef}\n              style={{ display: \"none\" }}\n              type=\"file\"\n              accept=\"text/csv\"\n              onChange={onFilesAdded}\n            />\n            <Box textAlign=\"center\" marginY={3}>\n              <Button\n                onClick={upload}\n                variant=\"contained\"\n                color=\"primary\"\n                size=\"large\"\n              >\n                Select your Victorian Energy Compare CSV\n              </Button>\n              <FormHelperText style={{ textAlign: \"center\", marginTop: 10 }}>\n                No data is uploaded to any servers, processing is done in your\n                browser on your device.\n              </FormHelperText>\n            </Box>\n            {usageFile && usageData && (\n              <Box className={classes.uploaded}>\n                <strong>File name:</strong> {usageFile?.name}\n                <br />\n                <strong>File size:</strong> {usageFile?.size.toString()} bytes\n                <br />\n                <strong>Earliest record date:</strong>{\" \"}\n                {format(usageData[0].date, \"PPPP\")}\n                <br />\n                <strong>Latest record date:</strong>{\" \"}\n                {format(usageData[usageData.length - 1].date, \"PPPP\")}\n              </Box>\n            )}\n             {csvError && (\n              <Box className={classes.error}>\n                There was a problem processing the CSV. Please ensure this data is in the correct Victorian Energy Compare Data format.\n              </Box>\n            )}\n          </Paper>\n        </Grid>\n        <Grid item>\n          <Paper className={classes.paper}>\n            <Typography variant=\"h6\" className={classes.heading}>\n              <DateRangeTwoToneIcon />\n              Working from home schedule\n            </Typography>\n            <Typography variant=\"subtitle1\" gutterBottom>\n              Choose the appropriate times you work from home.\n            </Typography>\n            <Grid container spacing={2}>\n              <Grid item sm={6}>\n                <FormControl>\n                  <FormLabel>Dates</FormLabel>\n                  <KeyboardDatePicker\n                    autoOk\n                    disableToolbar\n                    variant=\"inline\"\n                    label=\"Start date\"\n                    format=\"dd/MM/yyyy\"\n                    inputVariant=\"outlined\"\n                    value={startDate}\n                    InputAdornmentProps={{ position: \"start\" }}\n                    onChange={(date) => date && setStartDate(date)}\n                    margin=\"normal\"\n                    fullWidth\n                  />\n                  <KeyboardDatePicker\n                    autoOk\n                    disableToolbar\n                    variant=\"inline\"\n                    label=\"End date\"\n                    format=\"dd/MM/yyyy\"\n                    inputVariant=\"outlined\"\n                    value={endDate}\n                    InputAdornmentProps={{ position: \"start\" }}\n                    onChange={(date) => date && setEndDate(date)}\n                    margin=\"normal\"\n                    fullWidth\n                  />\n                </FormControl>\n              </Grid>\n              <Grid item sm={6}>\n                <FormControl>\n                  <FormLabel>Hours</FormLabel>\n                  <KeyboardTimePicker\n                    label=\"Start time\"\n                    mask=\"__:__ _M\"\n                    inputVariant=\"outlined\"\n                    value={startTime}\n                    InputAdornmentProps={{ position: \"start\" }}\n                    minutesStep={30}\n                    onChange={(date) => date && setStartTime(date)}\n                    margin=\"normal\"\n                    fullWidth\n                  />\n                  <KeyboardTimePicker\n                    label=\"End time\"\n                    mask=\"__:__ _M\"\n                    inputVariant=\"outlined\"\n                    value={endTime}\n                    InputAdornmentProps={{ position: \"start\" }}\n                    minutesStep={30}\n                    onChange={(date) => date && setEndTime(date)}\n                    margin=\"normal\"\n                    fullWidth\n                  />\n                  <FormHelperText>\n                    Usage data is only available in 30 minute increments.\n                  </FormHelperText>\n                </FormControl>\n              </Grid>\n            </Grid>\n            <Box marginTop={2}>\n              <FormControl>\n                <FormLabel>Days of week</FormLabel>\n                <FormGroup row>\n                  {[\n                    \"Monday\",\n                    \"Tuesday\",\n                    \"Wednesday\",\n                    \"Thursday\",\n                    \"Friday\",\n                    \"Saturday\",\n                    \"Sunday\",\n                  ].map((value) => (\n                    <FormControlLabel\n                      key={value}\n                      control={\n                        <Checkbox\n                          checked={(daysOfWeek as any)[value.toLowerCase()]}\n                          onChange={handleDaysOfWeekChange}\n                          name={value.toLowerCase()}\n                        />\n                      }\n                      label={value}\n                    />\n                  ))}\n                </FormGroup>\n              </FormControl>\n            </Box>\n          </Paper>\n        </Grid>\n        <Grid item>\n          <Paper className={classes.paper}>\n            <Typography variant=\"h6\" className={classes.heading}>\n              <PowerIcon />\n              Electricity usage\n            </Typography>\n            {isProcessing && <CircularProgress />}\n            {!isProcessing && (\n              <>\n                {usageData && wfhUsage > 0 && (\n                  <Box m={4} textAlign=\"center\">\n                    <Box fontSize={28} color=\"primary.main\">\n                      {Math.round(wfhUsage * 1000) / 1000} kWh\n                    </Box>\n                    <Box color=\"text.secondary\">\n                      / {wfhDays} work days = ~\n                      {Math.round((wfhUsage / wfhDays) * 1000) / 1000} kWh per\n                      work day\n                    </Box>\n                  </Box>\n                )}\n                {usageData && wfhUsage === 0 && (\n                  <Box m={4} textAlign=\"center\" color=\"text.secondary\">\n                    <Box fontSize={20}>No electricity usage</Box>\n                    Check if your usage data and schedule are correct\n                  </Box>\n                )}\n                {!usageData && (\n                  <Box m={4} textAlign=\"center\" color=\"text.secondary\">\n                    Select data to calculate usage\n                  </Box>\n                )}\n              </>\n            )}\n          </Paper>\n        </Grid>\n        <Grid item>\n          <Paper className={classes.paper}>\n            <Typography variant=\"h6\" className={classes.heading}>\n              <MonetizationOnIcon />\n              Electricity cost\n            </Typography>\n            {isProcessing && <CircularProgress />}\n            {!isProcessing && (\n              <>\n                {usageData && wfhUsage > 0 && (\n                  <>\n                    <Grid container spacing={1}>\n                      <Grid item sm={6}>\n                        <TextField\n                          label=\"Cost per kWh\"\n                          variant=\"outlined\"\n                          margin=\"normal\"\n                          type=\"number\"\n                          value={costPerKwh}\n                          onChange={(input) =>\n                            setCostPerKwh(parseFloat(input.currentTarget.value))\n                          }\n                          fullWidth\n                        />\n                        <FormHelperText>\n                          This tool only supports single-rate flat pricing.\n                        </FormHelperText>\n                      </Grid>\n                      <Grid item sm={6}>\n                        <TextField\n                          label=\"Apportion of costs\"\n                          variant=\"outlined\"\n                          margin=\"normal\"\n                          type=\"number\"\n                          value={percentageUsage}\n                          onChange={(input) =>\n                            setPercentageUsage(\n                              Math.min(parseInt(input.currentTarget.value), 100)\n                            )\n                          }\n                          InputProps={{\n                            endAdornment: (\n                              <InputAdornment position=\"end\">%</InputAdornment>\n                            ),\n                          }}\n                          inputProps={{\n                            max: 100,\n                          }}\n                          fullWidth\n                        />\n                        <FormHelperText>\n                          Refer to{\" \"}\n                          <a\n                            href=\"https://www.ato.gov.au/individuals/income-and-deductions/deductions-you-can-claim/home-office-expenses/#:~:text=You%20must%20take%20into%20account%20other%20members%20of%20your%20household%20when%20you%20work%20out%20your%20expenses.%20If%20a%20member%20of%20your%20household%20is%20using%20the%20same%20area%20of%20the%20house%20or%20the%20same%20service%20when%20you're%20working,%20you%20must%20apportion%20your%20expenses%20accordingly.\"\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                          >\n                            ATO guidance\n                          </a>{\" \"}\n                          on how to splits costs in a household.\n                        </FormHelperText>\n                      </Grid>\n                    </Grid>\n\n                    <Box m={4} textAlign=\"center\">\n                      <Box fontSize={28} color=\"primary.main\">\n                        $\n                        {Math.round(\n                          wfhUsage * costPerKwh * (percentageUsage / 100) * 100\n                        ) / 100}\n                      </Box>\n                      <Box color=\"text.secondary\">\n                        / {wfhDays} work days = ~$\n                        {Math.round(\n                          ((wfhUsage * costPerKwh * (percentageUsage / 100)) /\n                            wfhDays) *\n                            1000\n                        ) / 1000}{\" \"}\n                        per work day\n                      </Box>\n                    </Box>\n                  </>\n                )}\n                {usageData && wfhUsage === 0 && (\n                  <Box m={4} textAlign=\"center\" color=\"text.secondary\">\n                    <Box fontSize={20}>No electricity usage</Box>\n                    Check if your usage data and schedule are correct\n                  </Box>\n                )}\n                {!usageData && (\n                  <Box m={4} textAlign=\"center\" color=\"text.secondary\">\n                    Select data to calculate usage\n                  </Box>\n                )}\n              </>\n            )}\n          </Paper>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n};\n","import React from \"react\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { Upload } from \"./components/Calculator\";\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\n\nfunction App() {\n  return (\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      <React.Fragment>\n        <CssBaseline />\n        <Upload />\n      </React.Fragment>\n    </MuiPickersUtilsProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}