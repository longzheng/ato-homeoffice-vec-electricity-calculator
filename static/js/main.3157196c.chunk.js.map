{"version":3,"sources":["model/vec-csv.ts","model/maths-helper.ts","components/Calculator.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["parseCsv","file","a","Promise","resolve","reject","validateCsv","records","papaparse","worker","delimiter","header","step","results","onParseStep","complete","error","skipEmptyLines","firstLine","slice","text","startsWith","data","push","nmi","parseInt","meter_serial_number","type","date","parse","Date","estimated","usageByHalfHour","buildUsageByHalfHour","halfHourlyUsage","hour","halfHour","timeStart","toString","padStart","padEnd","timeEnd","timeRange","blockKwh","parseFloat","isNaN","asc","arr","sort","b","quantile","q","sorted","pos","length","base","Math","floor","rest","undefined","q25","q75","median","q50","useStyles","makeStyles","theme","container","marginTop","spacing","marginBottom","paper","padding","title","color","palette","secondary","textAlign","display","fontSize","marginLeft","marginRight","heading","primary","main","verticalAlign","uploaded","borderRadius","shape","background","success","dark","Upload","fileInputRef","React","createRef","useState","usageFile","setUsageFile","usageData","setUsageData","csvError","setCsvError","startDate","setStartDate","endDate","setEndDate","startTime","setStartTime","endTime","setEndTime","monday","tuesday","wednesday","thursday","friday","saturday","sunday","daysOfWeek","setDaysOfWeek","wfhUsage","setWfhUsage","wfhDays","setWfhDays","costPerKwh","setCostPerKwh","percentageUsage","setPercentageUsage","usageMaxQuantile","setUsageMaxQuantile","isProcessing","setIsProcessing","classes","isDayOfWeekMatch","useCallback","getDay","Error","isHourScheduleMatch","startTimeHoursDecimal","getHours","getMinutes","endTimeHoursDecimal","useMemo","gtag","consumptionData","filter","x","map","record","Object","entries","key","value","wfhUsageSummary","max","reverse","q95","custom","wfhUsageSum","reduce","acc","cur","min","handleDaysOfWeekChange","event","target","name","checked","onFilesAdded","files","item","current","Container","maxWidth","className","Grid","direction","xs","Typography","variant","gutterBottom","Link","href","rel","Paper","ref","style","accept","onChange","Box","marginY","Button","onClick","click","size","FormHelperText","format","sm","FormLabel","autoOk","disableToolbar","label","inputVariant","InputAdornmentProps","position","margin","fullWidth","mask","minutesStep","FormGroup","row","FormControlLabel","width","control","Checkbox","toLowerCase","CircularProgress","TextField","input","currentTarget","InputProps","endAdornment","InputAdornment","inputProps","round","m","createMuiTheme","overrides","MuiCssBaseline","html","WebkitFontSmoothing","body","backgroundColor","App","utils","DateFnsUtils","ThemeProvider","CssBaseline","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","console","message"],"mappings":"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","file":"static/js/main.3157196c.chunk.js","sourcesContent":["import * as papaparse from \"papaparse\";\nimport { parse } from \"date-fns\";\n\nexport type VecRecord = {\n  nmi: number;\n  meter_serial_number: number;\n  type: \"consumption\" | \"generation\";\n  date: Date;\n  estimated: boolean;\n  usageByHalfHour: { [hour: number]: number };\n};\n\nexport const parseCsv = async (file: File): Promise<VecRecord[]> => {\n  return new Promise(async (resolve, reject) => {\n    if ((await validateCsv(file)) === false) return reject();\n    let records: VecRecord[] = [];\n\n    papaparse.parse(file, {\n      worker: true, // use web workers\n      delimiter: \",\",\n      header: true,\n      step: (results) => onParseStep(results, records),\n      complete: () => {\n        return resolve(records);\n      },\n      error: () => {\n        return reject();\n      },\n      skipEmptyLines: true,\n    });\n  });\n};\n\nconst validateCsv = async (file: File): Promise<boolean> => {\n  const firstLine = file.slice(0, 825, \"text/plain\");\n  const text = await firstLine.text();\n\n  // match text with expected CSV headers\n  return (\n    text.startsWith(\n      `\"NMI\",\"METER SERIAL NUMBER\",\"CON/GEN\",\"DATE\",\"ESTIMATED?\",\"00:00 - 00:30\",\"00:30 - 01:00\",\"01:00 - 01:30\",\"01:30 - 02:00\",\"02:00 - 02:30\",\"02:30 - 03:00\",\"03:00 - 03:30\",\"03:30 - 04:00\",\"04:00 - 04:30\",\"04:30 - 05:00\",\"05:00 - 05:30\",\"05:30 - 06:00\",\"06:00 - 06:30\",\"06:30 - 07:00\",\"07:00 - 07:30\",\"07:30 - 08:00\",\"08:00 - 08:30\",\"08:30 - 09:00\",\"09:00 - 09:30\",\"09:30 - 10:00\",\"10:00 - 10:30\",\"10:30 - 11:00\",\"11:00 - 11:30\",\"11:30 - 12:00\",\"12:00 - 12:30\",\"12:30 - 13:00\",\"13:00 - 13:30\",\"13:30 - 14:00\",\"14:00 - 14:30\",\"14:30 - 15:00\",\"15:00 - 15:30\",\"15:30 - 16:00\",\"16:00 - 16:30\",\"16:30 - 17:00\",\"17:00 - 17:30\",\"17:30 - 18:00\",\"18:00 - 18:30\",\"18:30 - 19:00\",\"19:00 - 19:30\",\"19:30 - 20:00\",\"20:00 - 20:30\",\"20:30 - 21:00\",\"21:00 - 21:30\",\"21:30 - 22:00\",\"22:00 - 22:30\",\"22:30 - 23:00\",\"23:00 - 23:30\",\"23:30 - 00:00\"`\n    ) ||\n    text.startsWith(\n      `NMI,METER SERIAL NUMBER,CON/GEN,DATE,ESTIMATED?,00:00 - 00:30,00:30 - 01:00,01:00 - 01:30,01:30 - 02:00,02:00 - 02:30,02:30 - 03:00,03:00 - 03:30,03:30 - 04:00,04:00 - 04:30,04:30 - 05:00,05:00 - 05:30,05:30 - 06:00,06:00 - 06:30,06:30 - 07:00,07:00 - 07:30,07:30 - 08:00,08:00 - 08:30,08:30 - 09:00,09:00 - 09:30,09:30 - 10:00,10:00 - 10:30,10:30 - 11:00,11:00 - 11:30,11:30 - 12:00,12:00 - 12:30,12:30 - 13:00,13:00 - 13:30,13:30 - 14:00,14:00 - 14:30,14:30 - 15:00,15:00 - 15:30,15:30 - 16:00,16:00 - 16:30,16:30 - 17:00,17:00 - 17:30,17:30 - 18:00,18:00 - 18:30,18:30 - 19:00,19:00 - 19:30,19:30 - 20:00,20:00 - 20:30,20:30 - 21:00,21:00 - 21:30,21:30 - 22:00,22:00 - 22:30,22:30 - 23:00,23:00 - 23:30,23:30 - 00:00`\n    )\n  );\n};\n\nconst onParseStep = (\n  results: papaparse.ParseResult<unknown>,\n  records: VecRecord[]\n) => {\n  const data = (results.data as unknown) as { [key: string]: string };\n\n  records.push({\n    nmi: parseInt(data[\"NMI\"]),\n    meter_serial_number: parseInt(data[\"METER SERIAL NUMBER\"]),\n    type: data[\"CON/GEN\"] === \"Consumption\" ? \"consumption\" : \"generation\",\n    date: parse(data[\"DATE\"], \"dd/MM/yyyy\", new Date()),\n    estimated: data[\"ESTIMATED?\"] === \"Yes\",\n    usageByHalfHour: buildUsageByHalfHour(data),\n  });\n};\n\nconst buildUsageByHalfHour = (data: {\n  [key: string]: string;\n}): { [key: number]: number } => {\n  let halfHourlyUsage: { [key: number]: number } = {};\n\n  // loop through 30 minute blocks\n  for (let hour = 0; hour < 24; hour++) {\n    for (let halfHour = 0; halfHour < 2; halfHour++) {\n      let timeStart = `${hour.toString().padStart(2, \"0\")}:${(halfHour * 30)\n        .toString()\n        .padEnd(2, \"0\")}`;\n      let timeEnd =\n        halfHour === 0\n          ? `${hour.toString().padStart(2, \"0\")}:${((halfHour + 1) * 30)\n              .toString()\n              .padEnd(2, \"0\")}`\n          : `${(hour + 1).toString().padStart(2, \"0\")}:${((halfHour - 1) * 30)\n              .toString()\n              .padEnd(2, \"0\")}`;\n\n      if (timeEnd === \"24:00\") {\n        timeEnd = \"00:00\";\n      }\n\n      let timeRange = `${timeStart} - ${timeEnd}`;\n      let blockKwh = parseFloat(data[timeRange]);\n\n      if (isNaN(blockKwh)) {\n        blockKwh = 0;\n      }\n\n      // write record\n      halfHourlyUsage[hour + (halfHour ? 0.5 : 0)] = blockKwh;\n    }\n  }\n\n  return halfHourlyUsage;\n};\n","// refactored from https://stackoverflow.com/a/55297611\n\nconst asc = (arr: number[]) => arr.sort((a, b) => a - b);\n\nconst sum = (arr: number[]) => arr.reduce((a, b) => a + b, 0);\n\nconst mean = (arr: number[]) => sum(arr) / arr.length;\n\n// standard deviation\nexport const std = (arr: number[]): number => {\n  const mu = mean(arr);\n  const diffArr = arr.map((a) => (a - mu) ** 2);\n  return Math.sqrt(sum(diffArr) / (arr.length - 1));\n};\n\n// max\nexport const max = (arr: number[]): number => {\n  return asc(arr).reverse()[0];\n};\n\n// quantiles\nexport const quantile = (arr: number[], q: number): number => {\n  const sorted = asc(arr);\n  const pos = (sorted.length - 1) * q;\n  const base = Math.floor(pos);\n  const rest = pos - base;\n  if (sorted[base + 1] !== undefined) {\n    return sorted[base] + rest * (sorted[base + 1] - sorted[base]);\n  } else {\n    return sorted[base];\n  }\n};\n\nexport const q25 = (arr: number[]): number => quantile(arr, 0.25);\n\nexport const q50 = (arr: number[]): number => quantile(arr, 0.5);\n\nexport const q75 = (arr: number[]): number => quantile(arr, 0.75);\n\nexport const median = (arr: number[]): number => q50(arr);\n","import {\n  Box,\n  Button,\n  Checkbox,\n  CircularProgress,\n  Container,\n  FormControlLabel,\n  FormGroup,\n  FormHelperText,\n  FormLabel,\n  Grid,\n  InputAdornment,\n  Link,\n  makeStyles,\n  Paper,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { KeyboardDatePicker, KeyboardTimePicker } from \"@material-ui/pickers\";\nimport React, { useCallback, useMemo, useState } from \"react\";\nimport { parseCsv } from \"../model/vec-csv\";\nimport { parse, format } from \"date-fns\";\nimport DateRangeTwoToneIcon from \"@material-ui/icons/DateRangeTwoTone\";\nimport PowerIcon from \"@material-ui/icons/Power\";\nimport MonetizationOnIcon from \"@material-ui/icons/MonetizationOn\";\nimport InsertDriveFileIcon from \"@material-ui/icons/InsertDriveFile\";\nimport { VecRecord } from \"../model/vec-csv\";\nimport { max, median, q25, q75, quantile } from \"../model/maths-helper\";\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    marginTop: theme.spacing(5),\n    marginBottom: theme.spacing(5),\n  },\n  paper: {\n    padding: theme.spacing(2),\n  },\n  title: {\n    color: theme.palette.text.secondary,\n    textAlign: \"center\",\n    \"& svg\": {\n      display: \"block\",\n      fontSize: 60,\n      marginLeft: \"auto\",\n      marginRight: \"auto\",\n      marginBottom: theme.spacing(1),\n    },\n  },\n  heading: {\n    color: theme.palette.primary.main,\n    \"& > svg\": {\n      verticalAlign: \"sub\",\n      marginRight: theme.spacing(1),\n    },\n  },\n  uploaded: {\n    borderRadius: theme.shape.borderRadius,\n    background: theme.palette.success.dark,\n    color: \"white\",\n    padding: theme.spacing(2),\n  },\n  error: {\n    borderRadius: theme.shape.borderRadius,\n    background: theme.palette.error.dark,\n    color: \"white\",\n    padding: theme.spacing(2),\n  },\n}));\n\nexport const Upload = () => {\n  const fileInputRef = React.createRef<HTMLInputElement>();\n  const [usageFile, setUsageFile] = useState<File | undefined>(undefined);\n  const [usageData, setUsageData] = useState<VecRecord[]>();\n  const [csvError, setCsvError] = useState<boolean>(false);\n  const [startDate, setStartDate] = useState<Date>(new Date(\"2020-03-01\"));\n  const [endDate, setEndDate] = useState<Date>(new Date(\"2020-06-30\"));\n  const [startTime, setStartTime] = useState<Date>(\n    parse(\"8:00 AM\", \"h:m a\", new Date())\n  );\n  const [endTime, setEndTime] = useState<Date>(\n    parse(\"5:00 PM\", \"h:m a\", new Date())\n  );\n  const [daysOfWeek, setDaysOfWeek] = React.useState({\n    monday: true,\n    tuesday: true,\n    wednesday: true,\n    thursday: true,\n    friday: true,\n    saturday: false,\n    sunday: false,\n  });\n  const [wfhUsage, setWfhUsage] = useState<number[]>();\n  const [wfhDays, setWfhDays] = useState<number>(0);\n  const [costPerKwh, setCostPerKwh] = useState<number>(0.22);\n  const [percentageUsage, setPercentageUsage] = useState<number>(100);\n  const [usageMaxQuantile, setUsageMaxQuantile] = useState<number>(95);\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n\n  const classes = useStyles();\n\n  const isDayOfWeekMatch = useCallback(\n    (date: Date) => {\n      const dateDayOfWeek = date.getDay();\n\n      switch (dateDayOfWeek) {\n        case 0:\n          return daysOfWeek.sunday;\n        case 1:\n          return daysOfWeek.monday;\n        case 2:\n          return daysOfWeek.tuesday;\n        case 3:\n          return daysOfWeek.wednesday;\n        case 4:\n          return daysOfWeek.thursday;\n        case 5:\n          return daysOfWeek.friday;\n        case 6:\n          return daysOfWeek.saturday;\n        default:\n          throw new Error();\n      }\n    },\n    [daysOfWeek]\n  );\n\n  const isHourScheduleMatch = useCallback(\n    (hour: number) => {\n      // convert time to hours represented in decimal (e.g. 9:30 = 9.5)\n      const startTimeHoursDecimal =\n        startTime.getHours() + (startTime.getMinutes() >= 30 ? 0.5 : 0);\n      const endTimeHoursDecimal =\n        endTime.getHours() + (endTime.getMinutes() >= 30 ? 0.5 : 0);\n\n      return hour >= startTimeHoursDecimal && hour < endTimeHoursDecimal;\n    },\n    [startTime, endTime]\n  );\n\n  /** Handle uploading data */\n  useMemo(async () => {\n    if (!usageFile) return;\n\n    try {\n      setUsageData(await parseCsv(usageFile));\n      setCsvError(false);\n      gtag(\"event\", \"csv_parsed\");\n    } catch {\n      setUsageData(undefined);\n      setCsvError(true);\n      gtag(\"event\", \"csv_error\");\n    }\n  }, [usageFile]);\n\n  useMemo(async () => {\n    if (!usageData) return;\n\n    setIsProcessing(true);\n\n    // filter usage data by consumption\n    const consumptionData = usageData.filter(\n      (x) =>\n        x.date >= startDate &&\n        x.date <= endDate &&\n        isDayOfWeekMatch(x.date) &&\n        x.type === \"consumption\"\n    );\n\n    let wfhUsage: number[] = [];\n    let wfhDays = 0;\n    consumptionData.map((record) => {\n      for (const [key, value] of Object.entries(record.usageByHalfHour)) {\n        // our data's keys are represented as a decimal value (e.g. 9:30 = 9.5)\n        let hour = parseFloat(key);\n        if (isHourScheduleMatch(hour)) {\n          wfhUsage.push(value);\n        }\n      }\n      wfhDays++;\n      return true;\n    });\n\n    setWfhUsage(wfhUsage);\n    setWfhDays(wfhDays);\n\n    setIsProcessing(false);\n  }, [usageData, startDate, endDate, isDayOfWeekMatch, isHourScheduleMatch]);\n\n  const wfhUsageSummary = useMemo(() => {\n    if (wfhUsage) {\n      return {\n        max: max(wfhUsage),\n        median: median(wfhUsage),\n        q25: q25(wfhUsage),\n        q75: q75(wfhUsage),\n        q95: quantile(wfhUsage, 0.95),\n        custom: quantile(wfhUsage, usageMaxQuantile / 100),\n      };\n    }\n  }, [wfhUsage, usageMaxQuantile]);\n\n  const wfhUsageSum = useMemo(() => {\n    if (!wfhUsage || !wfhUsageSummary) return 0;\n\n    return wfhUsage?.reduce(\n      (acc, cur) => acc + Math.min(cur, wfhUsageSummary.custom),\n      0\n    );\n  }, [wfhUsage, wfhUsageSummary]);\n\n  const handleDaysOfWeekChange = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    setDaysOfWeek({ ...daysOfWeek, [event.target.name]: event.target.checked });\n  };\n\n  const onFilesAdded = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n\n    if (files?.length !== 1) {\n      return;\n    }\n\n    const file = files.item(0);\n\n    if (!file) {\n      return;\n    }\n\n    setUsageFile(file);\n\n    // analytics event\n    gtag(\"event\", \"select_csv\");\n\n    // clear file input\n    if (fileInputRef.current) fileInputRef.current.value = \"\";\n  };\n\n  const upload = () => {\n    fileInputRef.current?.click();\n  };\n\n  return (\n    <Container maxWidth=\"sm\" className={classes.container}>\n      <Grid container spacing={3} direction=\"column\">\n        <Grid item xs className={classes.title}>\n          <Typography variant=\"h6\" gutterBottom>\n            Home office electricity calculator\n            <br /> using Victorian Energy Compare Data\n          </Typography>\n          <Typography variant=\"body2\" gutterBottom>\n            To help calculate the electricity usage while working from home\n            during COVID lockdown for{\" \"}\n            <Link\n              href=\"https://www.ato.gov.au/individuals/income-and-deductions/deductions-you-can-claim/home-office-expenses/#Actualcostmethod\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              ATO's \"actual cost method\"\n            </Link>{\" \"}\n            of deducting home office expenses, this tool automatically processes\n            the{\" \"}\n            <Link\n              href=\"https://www.victorianenergysaver.vic.gov.au/energy-advice-for-business/accessing-and-understanding-energy-data\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Victorian Energy Compare Data\n            </Link>\n            .\n          </Typography>\n        </Grid>\n        <Grid item xs>\n          <Paper className={classes.paper}>\n            <Typography variant=\"h6\" className={classes.heading}>\n              <InsertDriveFileIcon />\n              Victorian Energy Compare Data\n            </Typography>\n            <Typography variant=\"subtitle1\" gutterBottom>\n              Export your Victorian Energy Compare Data CSV file from your{\" \"}\n              <Link\n                href=\"https://www.victorianenergysaver.vic.gov.au/energy-advice-for-business/accessing-and-understanding-energy-data#portal\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                electricity retailer or distributor's website\n              </Link>\n              .\n            </Typography>\n            <input\n              ref={fileInputRef}\n              style={{ display: \"none\" }}\n              type=\"file\"\n              accept=\"text/csv\"\n              onChange={onFilesAdded}\n            />\n            <Box textAlign=\"center\" marginY={3}>\n              <Button\n                onClick={upload}\n                variant=\"contained\"\n                color=\"primary\"\n                size=\"large\"\n              >\n                Select your Victorian Energy Compare CSV\n              </Button>\n              <FormHelperText style={{ textAlign: \"center\", marginTop: 10 }}>\n                No data is uploaded to any servers, processing is done in your\n                browser on your device.\n              </FormHelperText>\n            </Box>\n            {usageFile && usageData && (\n              <Box className={classes.uploaded}>\n                <strong>File name:</strong> {usageFile?.name}\n                <br />\n                <strong>File size:</strong> {usageFile?.size.toString()} bytes\n                <br />\n                <strong>Earliest record date:</strong>{\" \"}\n                {format(usageData[0].date, \"PPPP\")}\n                <br />\n                <strong>Latest record date:</strong>{\" \"}\n                {format(usageData[usageData.length - 1].date, \"PPPP\")}\n              </Box>\n            )}\n            {csvError && (\n              <Box className={classes.error}>\n                There was a problem processing the CSV. Please ensure this data\n                is in the correct Victorian Energy Compare Data format.\n              </Box>\n            )}\n          </Paper>\n        </Grid>\n        <Grid item>\n          <Paper className={classes.paper}>\n            <Typography variant=\"h6\" className={classes.heading}>\n              <DateRangeTwoToneIcon />\n              Working from home schedule\n            </Typography>\n            <Typography variant=\"subtitle1\" gutterBottom>\n              Choose the appropriate times you work from home.\n            </Typography>\n            <Box marginY={2}>\n              <Grid container spacing={2}>\n                <Grid item sm>\n                  <FormLabel>Dates</FormLabel>\n                  <KeyboardDatePicker\n                    autoOk\n                    disableToolbar\n                    variant=\"inline\"\n                    label=\"Start date\"\n                    format=\"dd/MM/yyyy\"\n                    inputVariant=\"outlined\"\n                    value={startDate}\n                    InputAdornmentProps={{ position: \"start\" }}\n                    onChange={(date) => date && setStartDate(date)}\n                    margin=\"normal\"\n                    fullWidth\n                  />\n                  <KeyboardDatePicker\n                    autoOk\n                    disableToolbar\n                    variant=\"inline\"\n                    label=\"End date\"\n                    format=\"dd/MM/yyyy\"\n                    inputVariant=\"outlined\"\n                    value={endDate}\n                    InputAdornmentProps={{ position: \"start\" }}\n                    onChange={(date) => date && setEndDate(date)}\n                    margin=\"normal\"\n                    fullWidth\n                  />\n                  <FormHelperText>\n                    Selects dates when you began working from home full-time and\n                    the tax year end.\n                  </FormHelperText>\n                </Grid>\n                <Grid item sm>\n                  <FormLabel>Hours</FormLabel>\n                  <KeyboardTimePicker\n                    label=\"Start time\"\n                    mask=\"__:__ _M\"\n                    inputVariant=\"outlined\"\n                    value={startTime}\n                    InputAdornmentProps={{ position: \"start\" }}\n                    minutesStep={30}\n                    onChange={(date) => date && setStartTime(date)}\n                    margin=\"normal\"\n                    fullWidth\n                  />\n                  <KeyboardTimePicker\n                    label=\"End time\"\n                    mask=\"__:__ _M\"\n                    inputVariant=\"outlined\"\n                    value={endTime}\n                    InputAdornmentProps={{ position: \"start\" }}\n                    minutesStep={30}\n                    onChange={(date) => date && setEndTime(date)}\n                    margin=\"normal\"\n                    fullWidth\n                  />\n                  <FormHelperText>\n                    Usage data is only available in 30 minute increments.\n                  </FormHelperText>\n                </Grid>\n              </Grid>\n            </Box>\n            <Box marginTop={2}>\n              <FormLabel>Days of week</FormLabel>\n              <FormGroup row>\n                {[\n                  \"Monday\",\n                  \"Tuesday\",\n                  \"Wednesday\",\n                  \"Thursday\",\n                  \"Friday\",\n                  \"Saturday\",\n                  \"Sunday\",\n                ].map((value) => (\n                  <FormControlLabel\n                    key={value}\n                    style={{ width: 124 }}\n                    control={\n                      <Checkbox\n                        checked={(daysOfWeek as any)[value.toLowerCase()]}\n                        color=\"primary\"\n                        onChange={handleDaysOfWeekChange}\n                        name={value.toLowerCase()}\n                      />\n                    }\n                    label={value}\n                  />\n                ))}\n              </FormGroup>\n            </Box>\n          </Paper>\n        </Grid>\n        <Grid item>\n          <Paper className={classes.paper}>\n            <Typography variant=\"h6\" className={classes.heading}>\n              <PowerIcon />\n              Electricity usage\n            </Typography>\n            {isProcessing && <CircularProgress />}\n            {!isProcessing && (\n              <>\n                {usageData && wfhUsageSummary && (\n                  <>\n                    <Grid container spacing={2}>\n                      <Grid item sm={7}>\n                        <TextField\n                          label=\"Max quantiles\"\n                          variant=\"outlined\"\n                          margin=\"normal\"\n                          type=\"number\"\n                          value={usageMaxQuantile}\n                          onChange={(input) =>\n                            setUsageMaxQuantile(\n                              Math.min(parseInt(input.currentTarget.value), 100)\n                            )\n                          }\n                          InputProps={{\n                            endAdornment: (\n                              <InputAdornment position=\"end\">%</InputAdornment>\n                            ),\n                          }}\n                          inputProps={{\n                            max: 100,\n                          }}\n                          fullWidth\n                        />\n                        <FormHelperText>\n                          To remove outlier usage during your working schedule\n                          (e.g. kettles), the calculator will cap your 30 min\n                          usage to{\" \"}\n                          {Math.round(wfhUsageSummary.custom * 1000) / 1000}{\" \"}\n                          kWh.\n                        </FormHelperText>\n                      </Grid>\n                      <Grid item sm>\n                        <FormHelperText>\n                          <strong>Usage per 30 min block</strong>\n                          <br />\n                          Max: {Math.round(wfhUsageSummary.max * 1000) /\n                            1000}{\" \"}\n                          kWh\n                          <br />\n                          Q95: {Math.round(wfhUsageSummary.q95 * 1000) /\n                            1000}{\" \"}\n                          kWh\n                          <br />\n                          Upper quartile:{\" \"}\n                          {Math.round(wfhUsageSummary.q75 * 1000) / 1000} kWh\n                          <br />\n                          Median:{\" \"}\n                          {Math.round(wfhUsageSummary.median * 1000) / 1000} kWh\n                          <br />\n                          Lower quartile:{\" \"}\n                          {Math.round(wfhUsageSummary.q25 * 1000) / 1000} kWh\n                        </FormHelperText>\n                      </Grid>\n                    </Grid>\n                    {wfhUsageSum > 0 && (\n                      <Box m={4} textAlign=\"center\">\n                        <Box fontSize={28} color=\"primary.main\">\n                          {Math.round(wfhUsageSum * 1000) / 1000} kWh\n                        </Box>\n                        <Box color=\"text.secondary\">\n                          / {wfhDays} work days = ~\n                          {Math.round((wfhUsageSum / wfhDays) * 1000) / 1000}{\" \"}\n                          kWh per work day\n                        </Box>\n                      </Box>\n                    )}\n                    {wfhUsageSum === 0 && (\n                      <Box m={4} textAlign=\"center\" color=\"text.secondary\">\n                        <Box fontSize={20}>No electricity usage</Box>\n                        Check if your usage data and schedule are correct\n                      </Box>\n                    )}\n                  </>\n                )}\n                {!usageData && (\n                  <Box m={4} textAlign=\"center\" color=\"text.secondary\">\n                    Select data to calculate usage\n                  </Box>\n                )}\n              </>\n            )}\n          </Paper>\n        </Grid>\n        <Grid item>\n          <Paper className={classes.paper}>\n            <Typography variant=\"h6\" className={classes.heading}>\n              <MonetizationOnIcon />\n              Electricity cost\n            </Typography>\n            {isProcessing && <CircularProgress />}\n            {!isProcessing && (\n              <>\n                {usageData && wfhUsageSum > 0 && (\n                  <>\n                    <Grid container spacing={2}>\n                      <Grid item xs sm={6}>\n                        <TextField\n                          label=\"Cost per kWh\"\n                          variant=\"outlined\"\n                          margin=\"normal\"\n                          type=\"number\"\n                          value={costPerKwh}\n                          onChange={(input) =>\n                            setCostPerKwh(parseFloat(input.currentTarget.value))\n                          }\n                          fullWidth\n                        />\n                        <FormHelperText>\n                          This tool only supports single-rate flat pricing.\n                        </FormHelperText>\n                      </Grid>\n                      <Grid item sm={6}>\n                        <TextField\n                          label=\"Apportion of costs\"\n                          variant=\"outlined\"\n                          margin=\"normal\"\n                          type=\"number\"\n                          value={percentageUsage}\n                          onChange={(input) =>\n                            setPercentageUsage(\n                              Math.min(parseInt(input.currentTarget.value), 100)\n                            )\n                          }\n                          InputProps={{\n                            endAdornment: (\n                              <InputAdornment position=\"end\">%</InputAdornment>\n                            ),\n                          }}\n                          inputProps={{\n                            max: 100,\n                          }}\n                          fullWidth\n                        />\n                        <FormHelperText>\n                          Refer to{\" \"}\n                          <Link\n                            href=\"https://www.ato.gov.au/individuals/income-and-deductions/deductions-you-can-claim/home-office-expenses/#:~:text=You%20must%20take%20into%20account%20other%20members%20of%20your%20household%20when%20you%20work%20out%20your%20expenses.%20If%20a%20member%20of%20your%20household%20is%20using%20the%20same%20area%20of%20the%20house%20or%20the%20same%20service%20when%20you're%20working,%20you%20must%20apportion%20your%20expenses%20accordingly.\"\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                          >\n                            ATO guidance\n                          </Link>{\" \"}\n                          on how to splits costs in a household.\n                        </FormHelperText>\n                      </Grid>\n                    </Grid>\n\n                    <Box m={4} textAlign=\"center\">\n                      <Box fontSize={28} color=\"primary.main\">\n                        $\n                        {Math.round(\n                          wfhUsageSum *\n                            costPerKwh *\n                            (percentageUsage / 100) *\n                            100\n                        ) / 100 || 0}\n                      </Box>\n                      <Box color=\"text.secondary\">\n                        / {wfhDays} work days = ~$\n                        {Math.round(\n                          ((wfhUsageSum *\n                            costPerKwh *\n                            (percentageUsage / 100)) /\n                            wfhDays) *\n                            1000\n                        ) / 1000 || 0}{\" \"}\n                        per work day\n                      </Box>\n                    </Box>\n                  </>\n                )}\n                {usageData && wfhUsageSum === 0 && (\n                  <Box m={4} textAlign=\"center\" color=\"text.secondary\">\n                    <Box fontSize={20}>No electricity usage</Box>\n                    Check if your usage data and schedule are correct\n                  </Box>\n                )}\n                {!usageData && (\n                  <Box m={4} textAlign=\"center\" color=\"text.secondary\">\n                    Select data to calculate usage\n                  </Box>\n                )}\n              </>\n            )}\n          </Paper>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n};\n","import React from \"react\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { Upload } from \"./components/Calculator\";\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\n\nconst theme = createMuiTheme({\n  overrides: {\n    MuiCssBaseline: {\n      \"@global\": {\n        html: {\n          WebkitFontSmoothing: \"auto\",\n        },\n        body: {\n          backgroundColor: \"#dddfee\",\n        },\n      },\n    },\n  },\n});\n\nfunction App() {\n  return (\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Upload />\n      </ThemeProvider>\n    </MuiPickersUtilsProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}